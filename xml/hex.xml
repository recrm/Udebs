<udebs>

<config>
    <hex>True</hex>
</config>

<definitions>
    <stats>
        <ACT />
    </stats>
    <strings>
        <sprite />
    </strings>
    <lists>
        <direction />
    </lists>
</definitions>

<map>
    <dim>
        <x>8</x>
        <y>8</y>
    </dim>
</map>

<entities>
    
    <!-- scripts -->
    <init>
        <effect>
            <i>CAST (DICE.7 DICE.7) earthquake</i>
            <i>token TRAVEL (0 0)</i>
        </effect>
    </init>
    
<!--    Metrics-->
    <notempty>
        <require>NAME.$T == empty</require>
    </notempty>

    <suptravel>
        <require>
            <i>NAME.$T == empty</i>
            <i>(DISTANCE hex) &lt;= (STAT $caster ACT)</i>
        </require>
    </suptravel>
    
    <ridge>
        <require>
            <i>(DISTANCE x) &lt;= 2</i>
            <i>(DISTANCE y) == 0</i>
        </require>
    </ridge>
    
<!--    Events-->
    <click>
        <effect>
            <i>CAST $T travel</i>
            <i>CAST $T query</i>
        </effect>
    </click>
    
    <query>
        <effect>
            <i>CLEAR token direction</i>
            <i>GETS token direction PATH.token.$T.notempty</i>
        </effect>
    </query>
    
    <travel>
        <effect>
            <i>MOVE $caster $target</i>
        </effect>
        <require>
            <i>(DISTANCE suptravel) &lt;= (STAT $caster ACT)</i>
        </require>
    </travel>
    
    <earthquake>
        <effect>
            <i>RECRUIT earth (FILL $target ridge)</i>
        </effect>
    </earthquake>    

<!--Units-->
    <earth>
        <sprite>M</sprite>
    </earth>
    
    <token>
        <ID>token</ID>     
        <sprite>K</sprite>
        <ACT>2</ACT>
    </token>
</entities>

</udebs>
