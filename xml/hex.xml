<udebs>

<config>
    <hex>True</hex>
    <name>hex</name>
</config>

<definitions>
    <stats>
        <ACT />
    </stats>
    <strings>
        <sprite />
    </strings>
    <lists>
        <direction />
    </lists>
</definitions>

<map type='hex'>
    <dim>
        <x>8</x>
        <y>8</y>
    </dim>
</map>

<entities>

    <!-- scripts -->
    <init>
        <effect>
            <i>CAST (DICE.7 DICE.7) earthquake</i>
            <i>token TRAVEL (0 0)</i>
        </effect>
    </init>

<!--    Metrics-->


    <suptravel>
        <require>
            <i>NAME.$T == empty</i>
            <i>(DISTANCE hex) &lt;= (STAT $caster ACT)</i>
        </require>
    </suptravel>

<!--    Events-->
    <click>
        <effect>
            <i>CAST $T travel</i>
            <i>CAST $T query</i>
        </effect>
    </click>

    <query>
        <effect>
            <i>CLEAR token direction</i>
            <i>GETS token direction (PATH token $target `(NAME.$T == empty))</i>
        </effect>
    </query>

    <travel>
        <require>(DISTANCE suptravel) &lt;= (STAT $caster ACT)</require>
        <effect>MOVE $caster $target</effect>
    </travel>

    <earthquake>
        <effect>RECRUIT earth (FILL $target `(
            ((DISTANCE x) &lt;= 2)
            ((DISTANCE y) == 0)
        ))</effect>
    </earthquake>

<!--Units-->
    <earth>
        <sprite>M</sprite>
    </earth>

    <token>
        <ID>token</ID>
        <sprite>K</sprite>
        <ACT>2</ACT>
    </token>
</entities>

</udebs>
