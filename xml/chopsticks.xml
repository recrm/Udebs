<udebs>

<config>
    <logging>False</logging>
    <name>chopsticks</name>
</config>

<definitions>
    <stats>
        <ACT/>
        <FIN/>
    </stats>
</definitions>

<entities>

    <!--Default-->
    <init>
        <effect>
            <i>one ACT REPLACE 2</i>
            <i>two ACT REPLACE 1</i>
<!--             <i>INIT printmap</i> -->
        </effect>
    </init>

    <printmap>
        <effect>
            <i>print one-left.STAT.FIN one-right.STAT.FIN</i>
            <i>print two-left.STAT.FIN two-right.STAT.FIN</i>
        </effect>
    </printmap>

    <player />

    <!-- Player one -->
    <one>
        <group>player</group>
    </one>

    <one-left>
        <group>one</group>
        <FIN>1</FIN>
    </one-left>

    <one-right>
        <group>one</group>
        <FIN>1</FIN>
    </one-right>

    <!-- Player two -->
    <two>
        <group>player</group>
    </two>

    <two-left>
        <group>two</group>
        <FIN>1</FIN>
    </two-left>

    <two-right>
        <group>two</group>
        <FIN>1</FIN>
    </two-right>

    <!--Moves-->
    <unit-move>
        <require>
            <i>$caster.STAT.FIN &gt; 0</i>
            <i>$caster.STAT.ACT &gt;= 2</i>
        </require>
        <effect>
            <i>$caster.CLASS.player ACT CHANGE -($caster.STAT.ACT)</i>
            <i>ALL.player ACT += 1</i>
<!--             <i>INIT printmap</i> -->
        </effect>
    </unit-move>

    <attack>
        <group>unit-move</group>
        <require>
            <i>$target.STAT.FIN > 0</i>
            <i>$caster.CLASS.player not-in $target.STAT.group</i>
        </require>
        <effect>
            <i>$target FIN += $caster.STAT.FIN</i>
            <i>$target ACTION close</i>
        </effect>
    </attack>

    <split>
        <group>unit-move</group>
        <require>
            <i>$caster.CLASS.player in $target.STAT.group</i>
            <i>$target.STAT.FIN == 0</i>
            <i>($caster.STAT.FIN % 2) == 0</i>
        </require>
        <effect>
            <i>value = ($caster.STAT.FIN / 2)</i>
            <i>$caster FIN CHANGE -$value</i>
            <i>$target FIN CHANGE $value</i>
        </effect>
    </split>

    <!--Chaincasts    -->
    <close>
        <require>$caster.STAT.FIN &gt;= 5</require>
        <effect>$caster FIN CHANGE -($caster.STAT.FIN)</effect>
    </close>
</entities>

</udebs>
