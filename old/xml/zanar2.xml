<udebs>

<config>
    <name>World MAP</name>
</config>


<!-- definitions -->
<definitions>
    <stats>
        <ACT />
        <SPD />
        <LVL />
    </stats>

    <strings>
        <sprite />
    </strings>

    <lists>
        <status rlist='rlist' />
    </lists>
</definitions>

<map>
    <dim>
        <x>8</x>
        <y>8</y>
    </dim>
</map>

<entities>
    <tick>
        <effect>
            <item>CAST (ALL mob) tick_active</item>
        </effect>
    </tick>
    
    
    <tick_active>
        <effect>CHANGE T ACT (STAT T SPD)</effect>
    </tick_active>
    
    <init>
        <effect>
            <item>'hero' TRAVEL (0,0)</item>
            <item>'goal' TRAVEL (7,7)</item>
            <item>'treasure' TRAVEL (DICE 5 +2 , DICE 5 +2)</item>
            <item>CHANGE 'recruiter' 'ACT' 4</item>
            <item>CAST 'recruiter' 'recruit'</item>
            <item>CAST 'recruiter' 'boss_recruit'</item>
        </effect>
    </init>

    <finish>
        <effect>
            <item>CHANGE 'recruiter' LVL 1</item>
            <item>CHANGE 'recruiter' ACT (STAT recruiter LVL)</item>
            <item>CAST (ALL mob) KO</item>
        </effect>
    </finish>

<!-- Status and chaincasts -->

    <recruit>
        <effect>
            <item>RECRUIT baddie (DICE 5 +2 , DICE 5 +2)</item>
            <item>CHANGE recruiter ACT -1</item>
            <item>DELAY (CAST recruiter recruit) 0</item>
        </effect>
        <require>
            <item>STAT recruiter ACT &gt;= 1</item>
        </require>
    </recruit>

    <!-- Moves -->
    
    <travel>
        <require>
            <item>STAT caster ACT &gt;=1</item>
            <item>DISTANCE pinf &lt;= 1</item>
            <item>(target.name == caster.name) or (target.name == 'empty') or (target.name == False)</item>
        </require>
        <effect>
            <item>CHANGE C ACT -1</item>
            <item>TRAVEL T</item>
        </effect>
    </travel>
    
    <KO>
        <require>
            <item>ONBOARD</item>
        </require>
        
        <effect>
            <item>target TRAVEL bump</item>
            <item>CHANGE T ACT -(STAT T ACT)</item>
            <item>GETS T status move</item>
        </effect>
        <stats>
            <SPD>-1</SPD>
        </stats>
    </KO>
    
    <boss_recruit>
        <require>
            <item>STAT recruiter LVL == 2</item>
        </require>
        <effect>
            <item>boss TRAVEL (7,7)</item>
        </effect>
    </boss_recruit>

<!-- clonables -->
    <mob />
        
    <baddie>
        <sprite>I</sprite>
        <ACT>1</ACT>
        <SPD>1</SPD>
        <group>
            <item>mob</item>
        </group>
    </baddie>
    
    <recruiter />
        
    <!-- on board units -->
    
    <hero>
        <sprite>X</sprite>
        <ACT>1</ACT>
        <SPD>1</SPD>
        <group>mob</group>
    </hero>

    <goal>
        <sprite>E</sprite>
    </goal>
    
    <treasure>
        <sprite>T</sprite>
    </treasure>
    
    <boss>
        <sprite>B</sprite>
    </boss>
                
</entities>

</udebs>
