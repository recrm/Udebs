<udebs>

<config>
    <hex>True</hex>
</config>

<definitions>
    <stats>
        <ACT />
    </stats>
    <strings>
        <sprite />
    </strings>
    <lists>
        <movelist rlist='rlist' slist='equip' />
    </lists>
</definitions>

<map>
    <dim>
        <x>8</x>
        <y>8</y>
    </dim>
</map>

<entities>
    <init>
        <group>
            <item>equip</item>
        </group>
        <effect>
            <item>RECRUIT 'spark' (0,0)</item>
            <item>RECRUIT 'token' (0,5)</item>
        </effect>
    </init>
    
    <tick>       
        <effect>
            <item>CHANGE ACT (ALL 'tick1') 3</item> 
        </effect>
    </tick>
    
    <tick1 /> 
    
    <everything>
        <effect>
            <item>GETS movelist 'init' target</item>
            <item>GETS movelist 'tick' target</item>
            <item>REPLACE sprite target Q</item>
        </effect>
    </everything>
    
    <equip />
    
    <travel>
        <group>
            <item>equip</item>
        </group>
        <require>
            <item>DISTANCE p1 &lt;= 4</item>
            <item>target.name == 'empty'</item>
        </require>
    </travel>
    
    <spark_group>
        <ACT>3</ACT>
        <sprite>S</sprite>
    </spark_group>
    
    <token_group>
        <ACT>2</ACT>
        <movelist>
            <item>travel</item>
            <item>travel</item>
            <item>travel</item>
            <item>travel</item>
            <item>spark</item>
            <item>travel</item>
            <item>travel</item>
        </movelist>
    </token_group>
    
    <all_group>
        <ACT>1</ACT>
        <sprite>K</sprite>
    </all_group>

    <spark>
        <group>
            <item>tick1</item>
            <item>spark_group</item>
            <item>all_group</item>
        </group>
    </spark>
    
    <token>    
        <ACT>2</ACT>
        <group>
            <item>tick1</item>
            <item>token_group</item>
            <item>all_group</item>
        </group>
        <effect>
            <item>CHANGE ACT 'all_group' 1</item>
        </effect>
    </token>
    
</entities>

</udebs>
